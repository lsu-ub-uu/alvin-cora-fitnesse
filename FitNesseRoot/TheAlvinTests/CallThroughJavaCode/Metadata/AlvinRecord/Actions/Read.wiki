---
Static
---
!3 Read tests
 * '''Admin'''
  * '''Case 1''': An admin should be able to list alvin records with any visibility
  * '''Case 2''': An admin should be able to read any visibility record
 * '''Guest'''
  * '''Case 1''': A guest should be only able to read published records

!***> Admin tests
!***> Setup admin test case
!define currentAuthToken {$alvinAdminAuthToken}
!define recordId {$hiddenRecord}

### Expect all 2 records are listed (published and unpunlished (fitnesse1, fitnesse2))
!define expectedListResult {=~/(?=.*"name":"mainTitle","value":"fitnesse1")(?=.*"name":"mainTitle","value":"fitnesse2")/}
*!
!*** '''Case 1''': An admin should be able to list alvin records with any visibility
!| ComparerFixture |
| authToken | type |idToStore| testReadRecordListAndStoreRecordById? |
| ${currentAuthToken} | alvin-record | $publishedRecord |${expectedListResult}|
*!
!*** '''Case 2''': An admin should be able to read any visibility record
!| ChildComparerFixture |
| authToken | type   | id | testReadAndStoreRecord? | getStatusType? |
| ${currentAuthToken} | alvin-record | $publishedRecord | | OK |
| ${currentAuthToken} | alvin-record | $unpublishedRecord | | OK |
*!
*!
!***> Guest tests
!***> Setup guest test case
!define currentAuthToken {$guestToken}
!define recordId {$publishedRecord}

### Expect only 1 record is listed (published (fitnesse1) and the others are not listed (unpublished (fitnesse2)).
!define expectedSearchResult {(?=.*"name":"mainTitle","value":"fitnesse1")(?!.*"name":"mainTitle","value":"fitnesse2")}
changed waiting for visibility to be implemented
!define expectedSearchResult {(?=.*"name":"mainTitle","value":"fitnesse1")(?=.*"name":"mainTitle","value":"fitnesse2")}
!define recordId {$publishedRecord}
*!

!*** '''Case 1''': A guest should be only able to read published records
!| ChildComparerFixture |
| authToken | type   | id | testReadAndStoreRecord? | getStatusType? |
| ${currentAuthToken} | alvin-record | $publishedRecord | | OK |
| ${currentAuthToken} | alvin-record | $unpublishedRecord | | FORBIDDEN |
*!
*!
